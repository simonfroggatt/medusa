{% load static %}
<h3>Available Symbols</h3>
                <table id="product_symbol_table_available" class="table table-hover table-sm"
                       style="width:100%">
                    <thead>
                    <tr>
                        <th class="text-start">&nbsp;</th>
                        <th width="col-1">Symbol</th>
                        <th class="col-11">Name</th>

                    </tr>
                    </thead>
                </table>


<script>
$(document).ready(function() {

   window.CSRF_TOKEN = "{{ csrf_token }}";

    var manual_data = {}

    if ($.fn.dataTable.isDataTable('#product_symbol_table_available')) {
        var product_symbol_table_available = $('#product_symbol_table_available').DataTable();
    } else {

        var product_symbol_table_available = $('#product_symbol_table_available').DataTable({
            "dom": "<'row'<'col-6'fl><'col-6'p>>" +
                "<'row'<'col-12'tr>>",
            "processing": true,
            "lengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
            "pageLength": 10,
            "autoWidth": false,
            "responsive": false,
            "serverSide": false,
            "select": 'single',
            "scroller": true,
            scrollY: 400,
            "rowId": 'id',
            "ajax": {
                "processing": true,
                "url": "/products/api/productsymbols-available/{{ product_obj.product_id }}?format=datatables",
                "type": "GET",
            },
            "deferRender": false,

            "search": {
                "regex": true
            },
            columns: [
                    {data: "id",
                    render: function ( data, type, row ) {
                        let add_icon = '<a class="btn btn-success btn-sm js-product-symbol-edit" role="button" data-url="api/product/' + {{ product_obj.product_id }} + '/addproductsymbol/' + row['id'] + '"><i class="fa-solid fa-plus"></i></a>';
                        return add_icon
                    },
                    },
                {data: "image_path", defaultContent: "no-image.png",
                    render: function ( data, type, row ) {
                    if(data == null ){
                        img_path = {% get_media_prefix %} + "no-image.png"
                    }
                    else{
                        img_path = {% get_media_prefix %} + data
                    }

                     return '<img class="rounded mx-auto d-block product-thumb" src="'+img_path+'" height="50px">';
                    },
                },
                {data: "referent"},


            ]
        });
    }
})



</script>