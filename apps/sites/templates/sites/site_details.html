{% extends 'partials/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
    <form method="post">
        {{ form.media }}
        {% csrf_token %}

        <div class="form-group">
            <div class="row">
                    <div class="col-6 col-md-2">{{ form.name|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.company_name|as_crispy_field }}</div>
                    <div class="col-6 col-md-2">{{ form.url|as_crispy_field }}</div>
                    <div class="col-6 col-md-2">{{ form.ssl|as_crispy_field }}</div>
                    <div class="col-6 col-md-1">{{ form.prefix|as_crispy_field }}</div>
                    <div class="col-6 col-md-2">{{ form.code|as_crispy_field }}</div>
                <hr>
                    <div class="col-6 col-md-3">{{ form.website|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.email_address|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.accounts_email_address|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.base_email|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.telephone|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.vat_number|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.registration_number|as_crispy_field }}</div>
                    <div class="col-6 col-md-1">{{ form.currency|as_crispy_field }}</div>
                    <div class="col-6 col-md-2">{{ form.tax_rate|as_crispy_field }}</div>
                    <div class="col-6 col-md-4">{{ form.address|as_crispy_field }}</div>
                    <div class="col-6 col-md-4">{{ form.postcode|as_crispy_field }}</div>
                    <div class="col-6 col-md-4">{{ form.country|as_crispy_field }}</div>
                <hr>
                    <div class="col-6 col-md-3">{{ form.thumb|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.logo|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.medusa_logo|as_crispy_field }}</div>
                    <div class="col-6 col-md-3">{{ form.logo_paperwork|as_crispy_field }}</div>
                <hr>
                    <div class="col-12">{{ form.footer_text|as_crispy_field }}</div>
                    <div class="col-12">{{ form.email_footer_text|as_crispy_field }}</div>
                <hr>
                    <div class="col-6">{{ form.meta_title|as_crispy_field }}</div>
                    <div class="col-6">{{ form.meta_description|as_crispy_field }}</div>
                    <div class="col-12">{{ form.meta_keywords|as_crispy_field }}</div>
                <div class="col-md-12">
                    {{ form.status|as_crispy_field }}
                    {{ form.product_code_template|as_crispy_field }}
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="button" class="btn {{ BUTTON_CANCEL }} "
                                onclick="location.href='{{ view.get_success_url }}'">Cancel
                        </button>
                        <button type="submit" id="update" class="btn {{ BUTTON_UPDATE }} pull-right">Update</button>
                    </div>
                </div>
        </div>
        </div>
    </form>
{% endblock content %}


{% block javascript %}
    <script src="{% static 'libs/tinymce/tinymce.min.js' %}"></script>
    <script>
        tinymce.init({
            selector: '#id_email_footer_text',
            height: 500,
            plugins: [
                'code', // For HTML view
                'image', // For image uploads
                'link',  // For email links
                'advlist', 'autolink', 'lists',
                'charmap', 'preview', 'anchor', 'searchreplace',
                'visualblocks', 'fullscreen', 'insertdatetime',
                'media', 'table', 'help', 'wordcount'
            ],
            toolbar: [
                'code | undo redo | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist',
                'link image | forecolor backcolor | removeformat | help',
            ],
            // Enable HTML code view with wrapping
            code_dialog_height: 600,
            code_dialog_width: 1000,
            // Image upload settings
            image_advtab: true,
            image_title: true,
            // Link settings
            link_context_toolbar: true,
            link_default_protocol: 'mailto:', // Default to email links
            // General settings
            menubar: 'file edit view insert format tools table help',
            toolbar_mode: 'sliding',
            contextmenu: 'link image table',
            // Preserve HTML
            verify_html: false,
            cleanup: false,
            valid_elements: '*[*]',
            extended_valid_elements: '*[*]',
            valid_children: '+body[style]',
            forced_root_block: false,
            // Auto save on change
            setup: function (editor) {
                editor.on('change', function () {
                    editor.save();
                });
            }
        });
    </script>
{% endblock javascript %}







